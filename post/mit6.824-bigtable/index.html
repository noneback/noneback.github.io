<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>MIT6.824-Bigtable - NoneBack</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="NoneBack" />
  <meta name="description" content="之前在网上找到了别人翻译的BigTable论文，就顺手保存了下来，但一直没开始看。最近发现BigTable和目前组内做的项目有很多设计上相似" />
<meta name="keywords" content="Bigtable, DFS, Distributed System, Paper Reading" />







<meta name="generator" content="Hugo 0.96.0" />


<link rel="canonical" href="https://noneback.github.io/post/mit6.824-bigtable/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.fa4b2b9f31b5c6d0b683db81157a9226e17b06e61911791ab547242a4a0556f2.css" integrity="sha256-&#43;ksrnzG1xtC2g9uBFXqSJuF7BuYZEXkatUckKkoFVvI=" media="screen" crossorigin="anonymous">




<link rel="stylesheet" href="/css/custom.css">


<meta property="og:title" content="MIT6.824-Bigtable" />
<meta property="og:description" content="之前在网上找到了别人翻译的BigTable论文，就顺手保存了下来，但一直没开始看。最近发现BigTable和目前组内做的项目有很多设计上相似" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://noneback.github.io/post/mit6.824-bigtable/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-09-16T22:54:59+08:00" />
<meta property="article:modified_time" content="2021-09-16T22:54:59+08:00" />

<meta itemprop="name" content="MIT6.824-Bigtable">
<meta itemprop="description" content="之前在网上找到了别人翻译的BigTable论文，就顺手保存了下来，但一直没开始看。最近发现BigTable和目前组内做的项目有很多设计上相似"><meta itemprop="datePublished" content="2021-09-16T22:54:59+08:00" />
<meta itemprop="dateModified" content="2021-09-16T22:54:59+08:00" />
<meta itemprop="wordCount" content="6769">
<meta itemprop="keywords" content="Paper Reading,MIT6.824,DFS,Distributed System," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="MIT6.824-Bigtable"/>
<meta name="twitter:description" content="之前在网上找到了别人翻译的BigTable论文，就顺手保存了下来，但一直没开始看。最近发现BigTable和目前组内做的项目有很多设计上相似"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->


<script type="text/x-mathjax-config">
MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>



</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">今日目标:摸鱼</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://noneback.github.io/">Home</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://noneback.github.io/post/">Archives</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://noneback.github.io/tags/">Tags</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://noneback.github.io/categories/">Categories</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://noneback.github.io/about/">About</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://github.com/noneback" rel="noopener" target="_blank">
              NoneBack
              
              <i class="iconfont">
                <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6C496.064 467.648 528.64 500.224 528.64 500.224 534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92 0 0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"></path>
  <path d="M841.152 457.152c-30.528 0-54.784 24.512-54.784 54.656l0 274.752L237.696 786.56 237.696 237.696l206.016 0c6.656 0 10.752 0 13.248 0C487.68 237.696 512 213.184 512 182.848 512 152.32 487.36 128 456.96 128L183.04 128C153.216 128 128 152.576 128 182.848c0 3.136 0.256 6.272 0.768 9.28C128.256 195.136 128 198.272 128 201.408l0 639.488c0 0.064 0 0.192 0 0.256 0 0.128 0 0.192 0 0.32 0 30.528 24.512 54.784 54.784 54.784l646.976 0c6.592 0 9.728 0 11.712 0 28.736 0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344l0-20.352L896 561.408 896 512.128C896 481.792 871.424 457.152 841.152 457.152z"></path>
</svg>

              </i>
            </a>
          
        
      </li>
    

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      今日目标:摸鱼
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://noneback.github.io/">Home</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://noneback.github.io/post/">Archives</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://noneback.github.io/tags/">Tags</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://noneback.github.io/categories/">Categories</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://noneback.github.io/about/">About</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://github.com/noneback" rel="noopener" target="_blank">
              NoneBack
              
              <i class="iconfont">
                <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6C496.064 467.648 528.64 500.224 528.64 500.224 534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92 0 0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"></path>
  <path d="M841.152 457.152c-30.528 0-54.784 24.512-54.784 54.656l0 274.752L237.696 786.56 237.696 237.696l206.016 0c6.656 0 10.752 0 13.248 0C487.68 237.696 512 213.184 512 182.848 512 152.32 487.36 128 456.96 128L183.04 128C153.216 128 128 152.576 128 182.848c0 3.136 0.256 6.272 0.768 9.28C128.256 195.136 128 198.272 128 201.408l0 639.488c0 0.064 0 0.192 0 0.256 0 0.128 0 0.192 0 0.32 0 30.528 24.512 54.784 54.784 54.784l646.976 0c6.592 0 9.728 0 11.712 0 28.736 0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344l0-20.352L896 561.408 896 512.128C896 481.792 871.424 457.152 841.152 457.152z"></path>
</svg>

              </i>
            </a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">MIT6.824-Bigtable</h1>
      
      <div class="post-meta">
        <time datetime="2021-09-16" class="post-time">
          2021-09-16
        </time>
        <div class="post-category">
            <a href="https://noneback.github.io/categories/mit6.824/"> MIT6.824 </a>
            <a href="https://noneback.github.io/categories/distributed-system/"> Distributed System </a>
            <a href="https://noneback.github.io/categories/paper-reading/"> Paper Reading </a>
            
          </div>
        

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Table of Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#介绍">介绍</a></li>
    <li><a href="#数据模型">数据模型</a>
      <ul>
        <li><a href="#rows">Rows</a></li>
        <li><a href="#column-family">Column Family</a></li>
        <li><a href="#time-stamp">Time Stamp</a></li>
        <li><a href="#tablet">Tablet</a></li>
        <li><a href="#sstable">SSTable</a></li>
        <li><a href="#api">API</a></li>
      </ul>
    </li>
    <li><a href="#架构设计">架构设计</a>
      <ul>
        <li><a href="#外部组件">外部组件</a></li>
        <li><a href="#内部组件">内部组件</a></li>
      </ul>
    </li>
    <li><a href="#存储相关">存储相关</a>
      <ul>
        <li><a href="#映射关系-寻址">映射关系 、寻址</a></li>
        <li><a href="#调度和监控">调度和监控</a></li>
      </ul>
    </li>
    <li><a href="#compaction">Compaction</a></li>
    <li><a href="#优化">优化</a>
      <ul>
        <li><a href="#局部性">局部性</a></li>
        <li><a href="#压缩">压缩</a></li>
        <li><a href="#commitlog-设计">CommitLog 设计</a></li>
      </ul>
    </li>
    <li><a href="#总结">总结</a></li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <p>之前在网上找到了别人翻译的BigTable论文，就顺手保存了下来，但一直没开始看。最近发现BigTable和目前组内做的项目有很多设计上相似的地方，于是用周末的时间快速的阅读了一遍。</p>
<p>这是Google分布式三大论文的最后一篇，本不属于MIT6.824课程的阅读材料的。但姑且先如此分类。</p>
<p>笔记依旧不深究具体细节，仅仅记录对问题的思考以及设计的思路。</p>
<h2 id="介绍">介绍</h2>
<p>Bigtable 是一个分布式的<strong>结构化数据</strong>存储系统，构建于GFS之上，用于存储大量的结构化，半结构化数据。它属于NoSql数据存储，优势在于可拓展性和性能，以及基于GFS上的可靠容错。</p>
<blockquote>
<p>Design Goal：Wide Applicability、Scalability、High Performance、High Availability</p>
</blockquote>
<h2 id="数据模型">数据模型</h2>
<p>Bigtable的数据模型属于No Scheme的设计，仅提供了一个简单的数据模型，它将所有的数据视为字符串，数据的编解码交由上层业务方决定。</p>
<p>实际上，Bigtable 是一个<strong>稀疏的、分布式的、持久化存储的多维度排序 Map</strong>。Map的<strong>索引</strong>是<strong>Row Key，Column Key以及TimeStamp</strong>。Map中的<strong>每一个Value就是一个无结构的Byte数组</strong>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// 映射抽象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">(</span><span class="nx">row</span><span class="p">:</span><span class="kt">string</span><span class="p">,</span> <span class="nx">column</span><span class="p">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">time</span><span class="p">:</span><span class="kt">int64</span><span class="p">)</span><span class="o">-</span><span class="p">&gt;</span><span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 一个Row Key实际上是 {Row , Column, Timestamp} 组成的多维结构。
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gufarm0ykaj615k0d0jts02.jpg" alt="image-20210913205832997"></p>
<p>论文对数据模型原文阐述如下：</p>
<blockquote>
<p>A Bigtable is a sparse, distributed, persistent multidimensional sorted map.</p>
</blockquote>
<p>Sparse，实际上是说同个Table中的Column属性是可以置空的，并且置空比较常见。</p>
<table>
<thead>
<tr>
<th>Row</th>
<th>Columns</th>
</tr>
</thead>
<tbody>
<tr>
<td>Row1</td>
<td>{ID，Name，Phone}</td>
</tr>
<tr>
<td>Row2</td>
<td>{ID，Name，Phone，Address}</td>
</tr>
<tr>
<td>Row3</td>
<td>{ID，Name，Phone，Email}</td>
</tr>
</tbody>
</table>
<p>Distributed，此处分布式关键在于拓展性和容错性，也就是<strong>Replication</strong>和<strong>Sharding</strong>。Bigtable通过GFS的Replica实现副本容错，使用<strong>Tablet</strong>对数据分区，以实现拓展性。</p>
<p>Persistent Multidimentsional Sorted，持久化说明最终需要数据落盘，Bittable相关的设计有WAL，LSM优化前台读写时延，优化落盘速度。</p>
<blockquote>
<p>BigTable的开源实现就是HBase，是一种行列数据库</p>
</blockquote>
<h3 id="rows">Rows</h3>
<p>Bigtable通过行关键字的字典序来组织数据，Row Key可以是任意的字符串。对于单行的读写操作是原子的。</p>
<blockquote>
<p>字典序的好处在于可以将相关的行记录聚合</p>
<p>可以参考Mysql的实现，利用undo log的方式实现行操作的原子性</p>
</blockquote>
<h3 id="column-family">Column Family</h3>
<p>Column Keys 组成的集合叫做 Column Family，一个Column Family下的数据往往属于同一种类型。</p>
<p>一个Column Key由 Column Family : Qualifier组， 列族的名字必须是可打印的字符串,而限定词的名字可以是任意的字符串。</p>
<blockquote>
<p>论文中有提到：</p>
<blockquote>
<p>Access control and both disk and memory accounting are performed at the column-family level.</p>
</blockquote>
<p>原因在于，业务方取得数据实际上更多的是以Column为单位取得相关的数据，比如读取网页content等操作。实践上，往往也将列数据压缩存储。基于此，Column Family显然是一个比Row更合适的Level。</p>
<p>如我们允许一些应用可以添加新的基本数据、一些应用可以读取基本数据并创建继承的列族、一些应用则只允许浏览数据(甚至可能因为隐私的原因不能浏览所有数据) 。</p>
</blockquote>
<h3 id="time-stamp">Time Stamp</h3>
<p>TimeStamp主要是为了维护不同时间的不同数据版本，属于一种逻辑时钟。同时它也作为索引，不同版本的数据可以通过时间戳索引查询。</p>
<blockquote>
<p>设计上，一般按时间新旧排序，推测在数据版本少的时候可以利用一个指向上一个时间版本的指针来维护数据时间视图，在数据版本多的时候需要进化为索引结构。</p>
<p>显然基于时间戳必然有范围查询的需求，选择可排序数据结构作为索引比较合</p>
<p>但TimeStamp需要Table额外维护一个数据版本视图，带来一定的管理负担。一般的解决方法是限制数据版本的数量，将过期的数据进行GC处理。</p>
</blockquote>
<h3 id="tablet">Tablet</h3>
<p>Bigtable在存储设计上，采用的是<strong>range-based</strong>的<strong>数据分片方式</strong>，而Tablet是Bigtable中data sharding 和 load balance的基本单位。</p>
<p>Tablet其实就是有若干个Row组成的一块数据，并由一个Tablet Server进行管理。行数据在Bigtable系统内最终保存在一个Tablet上，并在适当的时候进行Tablet拆分合并，在Tablet Server之间负载均衡。</p>
<blockquote>
<p>Range Base的分片方式的好处是有利于范围查询，与之相对的是Hash分片的方式。</p>
</blockquote>
<h3 id="sstable">SSTable</h3>
<p>SSTable 是一个<strong>持久化的、排序的、不可更改</strong>的Map 结构,而 Map 是一个 key-value 映射的数据结构,key 和 value 的值都是任意的 Byte 串。</p>
<p>Tablet实际上是Bigtable系统中对外的存储单位，实际上，内部的存储文件是Google SSTable格式的。</p>
<blockquote>
<p>从内部看，SSTable 是一系列的数据块(通常每个块的大小是 64KB)，通过索引加速定位数据。读取时先读索引，二分查索引，在读取数据块。</p>
</blockquote>
<h3 id="api">API</h3>
<p>原文中的API如下，主要是为了体现和RDB不同的地方。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// Writing to Bigtable
</span></span></span><span class="line"><span class="cl"><span class="c1">// Open the table Table *T = OpenOrDie(&#34;/bigtable/web/webtable&#34;); // Write a new anchor and delete an old anchor 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">RowMutation</span> <span class="nf">r1</span><span class="p">(</span><span class="n">T</span><span class="p">,</span>   <span class="s">&#34;com.cnn.www&#34;</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="n">r1</span><span class="p">.</span><span class="n">Set</span><span class="p">(</span><span class="s">&#34;anchor:www.c-span.org&#34;</span><span class="p">,</span> <span class="s">&#34;CNN&#34;</span><span class="p">);</span> <span class="n">r1</span><span class="p">.</span><span class="n">Delete</span><span class="p">(</span><span class="s">&#34;anchor:www.abc.com&#34;</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="n">Operation</span> <span class="n">op</span><span class="p">;</span> <span class="n">Apply</span><span class="p">(</span><span class="o">&amp;</span><span class="n">op</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">r1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="c1">// Reading from Bigtable
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Scanner</span> <span class="n">scanner</span><span class="p">(</span><span class="n">T</span><span class="p">);</span> <span class="n">ScanStream</span> <span class="o">*</span><span class="n">stream</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="n">stream</span> <span class="o">=</span> <span class="n">scanner</span><span class="p">.</span><span class="n">FetchColumnFamily</span><span class="p">(</span><span class="s">&#34;anchor&#34;</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="n">stream</span><span class="o">-&gt;</span><span class="n">SetReturnAllVersions</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl"><span class="n">scanner</span><span class="p">.</span><span class="n">Lookup</span><span class="p">(</span><span class="s">&#34;com.cnn.www&#34;</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(;</span> <span class="o">!</span><span class="n">stream</span><span class="o">-&gt;</span><span class="n">Done</span><span class="p">();</span> <span class="n">stream</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">())</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">  <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%s %s %lld %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">         <span class="n">scanner</span><span class="p">.</span><span class="n">RowName</span><span class="p">(),</span> 
</span></span><span class="line"><span class="cl">         <span class="n">stream</span><span class="o">-&gt;</span><span class="n">ColumnName</span><span class="p">(),</span> 
</span></span><span class="line"><span class="cl">         <span class="n">stream</span><span class="o">-&gt;</span><span class="n">MicroTimestamp</span><span class="p">(),</span> 
</span></span><span class="line"><span class="cl">         <span class="n">stream</span><span class="o">-&gt;</span><span class="n">Value</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="架构设计">架构设计</h2>
<h3 id="外部组件">外部组件</h3>
<p>Bigtable是基于Google内部其他组件之上构建的，这极大的简化了Bigtable的设计。</p>
<h4 id="gfs">GFS</h4>
<p>GFS是Bigtable底层的GFS，可以提供Replication，提供一定的数据容错性。</p>
<blockquote>
<p>可以参考上一篇笔记内容</p>
</blockquote>
<h4 id="chubby">Chubby</h4>
<p>Chubby是一个高可用的分布式锁组件，它提供了一个NameSpace，其中的目录和文件均可作为一个分布式锁来使用。</p>
<blockquote>
<p>高可用是指维护了多个可提供服务副本，并使用paxos算法保证副本间的一致性。同时使用租约机制，防止失效的Chubby客户端一直持有锁。</p>
</blockquote>
<p>为什么需要Chubby？它的作用是什么？</p>
<p>原文中提到的功能有：</p>
<ul>
<li>
<p>存储Bigtable的Column Family信息</p>
</li>
<li>
<p>存储ACL。ACL 是一种机制，用于定义用户访问存储对象的权限</p>
</li>
<li>
<p>存储了 元数据的起始位置，也就是Root Tablet的位置信息</p>
<blockquote>
<p>Bigtable使用了一个三层的类B+树的存储数据结构，Chubby中保存了Root Tablet的位置信息，Root Tablet保存了其他MetaData的Tablet信息，其他MetaData的Tablet则保存着其他用户的Tablet集合信息。</p>
<p>在Bigtable启动时，会先从Chubby中获取Root tablet，然后再获取其他映射信息。</p>
</blockquote>
</li>
<li>
<p>Tablet Server的生命周期监控</p>
<blockquote>
<p>Tablet Server在启动时，会在Chubby<strong>指定目录</strong>下生成一个唯一名称的文件，并获取此文件的排它锁。当Tablet Server失效时，会释放锁。</p>
<p>Master通过监控这个目录中的文件以及持有锁的状态，来监控集群中的Tablet的状态以及配置变更</p>
</blockquote>
</li>
</ul>
<p>总结一下，Chubby的功能其实主要分为两类。一是利用Chubby作为高可用高可靠的存储节点来存储关键元信息；二是利用其提供的分布式锁服务来管理维护存储节点（Tablet Server）。</p>
<p>在GFS中，这些功能其实是由Master去负责管理维护的。在Bigtable中，由Chubby接管，这样简化了Master的设计，并减轻了Master的负载。</p>
<blockquote>
<p>抽象意义上，Chubby也能视为Master节点的一部分。</p>
</blockquote>
<h3 id="内部组件">内部组件</h3>
<h4 id="master">Master</h4>
<p>Bigtable也属于Master-Slave的架构，这点个GFS以及MR的设计很像。不同之处在于，Bigtable将元数据交给了Chubby + Tablet Server去存储与管理，Master只负责调度需要的信息，不存储Tablet位置信息。</p>
<blockquote>
<p>Tablet分配，GC；Tablet Server监控，负载均衡；表的元数据修改等</p>
<p>所以调度需要的信息包含：</p>
<ol>
<li>所有Tablet的信息，用于分析分配和分布情况</li>
<li>Tablet Server的状态信息，判断是否满足分配条件</li>
</ol>
</blockquote>
<h4 id="tablet-server">Tablet Server</h4>
<p>Tablet Server 管理一系列的Tablet，负责处理Tablet的数据读写，以及Tablet的拆分合并等操作。</p>
<blockquote>
<p>Master不保存元信息，Client读取信息直接与Chubby和Tablet Server交互。</p>
<p>Tablet的拆分由Tablet Server主动发起，并及时通知Master。这一步可能会消息丢失，所以最好使用WAL+重试的方式保证操作不丢失</p>
</blockquote>
<h4 id="client-sdk">Client SDK</h4>
<p>作为Bigtable的接入层，业务方使用ClientSDK接入Bigtable。Client SDK作为Bigtable的入口，优化的关键在于怎么样可以减少获取元数据的次数。一般使用cache以及prefetch的思路去减少网络的交互，充分利用时间和空间局部性。</p>
<blockquote>
<p>缓存的使用势必会带来不一致问题，需要设计合适的方案解决此问题。如不一致时重新寻址。</p>
</blockquote>
<h2 id="存储相关">存储相关</h2>
<h3 id="映射关系-寻址">映射关系 、寻址</h3>
<p>Bigtable的数据实际上是由(Table, Row, Column)三元组唯一确定的，保存在Tablet中，Tablet最终保存在GFS SSTable中。</p>
<p>Tablet逻辑上可以理解为Bigtable的落盘实体，实际上是交由Tablet Server去管理维护，那么这样就需要Bigtable去维护一定的映射关系。</p>
<blockquote>
<p>基于原文描述，可能需要维护的映射：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"> <span class="n">Mapping</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="n">Table</span> <span class="o">=&gt;</span> <span class="n">list</span> <span class="n">of</span> <span class="n">Tablets</span> <span class="c1">// 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">Tablet</span> <span class="o">=&gt;</span> <span class="n">Tablet</span> <span class="n">handle</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">   <span class="k">struct</span> <span class="nc">Tablet</span> <span class="n">handle</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="n">list</span> <span class="n">of</span> <span class="n">Rows</span> <span class="c1">// Tablet contains
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="n">Tablet</span> <span class="n">Server</span> <span class="c1">// where Tablet shores
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="p">...</span>
</span></span><span class="line"><span class="cl">   <span class="n">list</span> <span class="n">of</span> <span class="n">SSTable</span> <span class="c1">// where the tablet stores in GFS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">   <span class="c1">// Indexes
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">Row</span> <span class="n">or</span> <span class="n">Column</span> <span class="n">Key</span> <span class="o">=&gt;</span> <span class="n">Tablet</span> <span class="n">Location</span> <span class="o">=&gt;</span> <span class="n">SSTable</span> 
</span></span><span class="line"><span class="cl"> <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<p>Bigtable通过<code>Root Tablet + METADATA Table</code>进行Tablet寻址。Chubby存储了Root Tablet的位置信息，METADATA Table则由Tablet Server负责维护。</p>
<p>Root Tablet中保存了其他METADATA Tablet的位置信息。而METADATA Table的每一个Tablet包含了一系列的User Tablets的位置信息（可以理解为UserTable handle）,  每个Tablet的位置信息保存在METADATA的Row中。</p>
<blockquote>
<p>METADATA Table 中的Row :</p>
<p><code>(TableID,encoding of last row in Tablet) =&gt; Tablet Location</code></p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1guhk1wuu1pj60q80ge75k02.jpg" alt="image-20210915142508074"></p>
<blockquote>
<p>系统采用了类似B+树的三层结构来维护tablet location信息</p>
</blockquote>
<h3 id="调度和监控">调度和监控</h3>
<h4 id="调度">调度</h4>
<p>其实主要就是对Tablet的调度，包括分配和负载均衡。</p>
<p>其实两种归根到底都是分配问题。在任何一个时刻, 一个 Tablet 只能分配给一个 Tablet 服务器。Master保存了Tablet Server 相关的状态信息，当有Tablet需要分配时，就发送请求将Tablet分配出去。</p>
<blockquote>
<p>Master不维护寻址相关的状态信息，但需要维护Tablet Server的状态信息（持有的Tablets数量、状态、剩余资源等），可以通过心跳周期上报到Master。所以说，Master其实是无状态的，负载也比较轻。</p>
</blockquote>
<h4 id="监控">监控</h4>
<p>监控是由Chubby + Master来完成的。</p>
<p>Tablet Server在启动时，会在Chubby<strong>指定目录</strong>下生成一个<strong>唯一名称的文件</strong>，并获取此文件的排它锁。当Tablet Server断开连接，lease失效后会自动释放文件锁。</p>
<blockquote>
<p>Tablet Server通过唯一文件决定是否对外提供服务。此文件可能被Master删除</p>
<p>Tablet Server可能由于网络因素重新连接，此时只要文件存在，Tablet重连时又会重新尝试去获取这个文件的排他锁。</p>
<p>如果不存在，当原Tablet Server重连是，应当自动退出集群。</p>
</blockquote>
<p>Master首先要在Chubby获取一个唯一文件排他锁保证Master节点的唯一性，并指定一个Tablet Server文件目录。</p>
<p>然后Master通过不断监控这个目录中的文件以及持有锁的状态，来监控集群中的Tablet的状态以及配置变更，并获取正在运行的Tablet Server列表。</p>
<p>一但发现有Tablet Server失效，Master就会把Chubby属于原Tablet Server的唯一文件删除，并把原来这个Tablet Server维护的Tablet集合重新分配给其他Tablet Server。</p>
<blockquote>
<p>Tablet Server失效有两种情况，一种是无法与Chubby连接，二是成为孤岛或者宕机。前者可以通过文件锁状态判断，后者通过Master发送心跳。其余情况，可能是Chubby无法提供服务。</p>
</blockquote>
<p>之后在和所有Active的Tablet Server进行通信，获取Tablet Server的状态信息；扫描METADATA表获取未分配的Tablet信息。</p>
<blockquote>
<p>监控的目的其实就是为了调度。</p>
</blockquote>
<h2 id="compaction">Compaction</h2>
<p>Bigtable对外提供读写服务，并且使用了LSM的结构对写性能进行优化。对于一个写操作，首先通过Chubby中保存的ACL信息，判断用户的权限；通过之后再以WAL的方式顺序写记录操作再CommitLog和Memtable中，并且最后会被持久化到SSTable中；</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1guhk6llq76j60uk0lsq4402.jpg" alt="image-20210915195135522"></p>
<p>由图中可以看出，memtable是保存在内存中的，无法无限的增加。所以Bigtable在memtable增长到一定大小的时候会进行一次Minor Compaction，将memtable的数据写入一个SSTable中，并写入GFS。</p>
<blockquote>
<p>实际上，memtable在转为SSTable之前会先转换成immutable memtable，并生成新的memtable支持前台写入。这样的中间状态其实是为了Minor Compaction不影响前台写。</p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1guill1zltrj615g0p8adp02.jpg" alt="image-20210916172932210"></p>
<p>Bigtable在处理写入数据时提出了<strong>Compaction</strong>概念，加速前台写。所有的前台随机写被转换为顺序写。并在后台的Compact进程中再次对数据进行写入。以读写放大为代价，优化前台感知到的写性能。</p>
<p>所谓Compaction，本质上就是对数据的一次再次扫描，在扫描写入过程中，对数据进行合并压缩和GC。</p>
<p>一般Compaction以多个不可变数据作为输入，Compact之后会将数据重新写入另一个新的只读有序结构(如SSTable)或者随机写落盘。</p>
<p>前台写对Compaction的参与数据不影响，这使得Compaction步骤原生支持并行。</p>
<blockquote>
<p>原文中提到了三种Compaction：</p>
<p><strong>Minor Compaction</strong>：将memtable转化成SSTable的过程就是Minor Compaction，写入过程中会丢弃被删除的数据，并只保留数据的终态。</p>
<blockquote>
<p>Minor Compaction的目的在于减少Tablet Server的内存使用，以及CommitLog的大小。</p>
</blockquote>
<p><strong>Merge Compaction</strong>：Memtable和SSTable一起Compact得到一个新的SSTable</p>
<p><strong>Major Compaction</strong>：多个SSTable也可能需要Compact成一个SSTable
但对于读请求，我们可能需要聚合Memtable以及一定的SSTable来做读查询，因为查询的数据可能存在于memtable或者SSTable中。</p>
</blockquote>
<p>原文中引入了<strong>二级缓存</strong>和<strong>Bloom Filter</strong>来加速读查询。</p>
<p>Tablet Server有两级缓存。第一层是<strong>扫描缓存</strong>，主要缓存从SSTable读取过的的KV pair；第二级是<strong>Block缓存</strong>，缓存读取的SSTable Block。</p>
<p>对于经常要重复读取相同数据的应用程序来说,扫描缓存非常有效；对于经常要读取刚刚读过的数据附近的数据的应用程序来说，Block 缓存更有用。</p>
<p><strong>Bloom Filter</strong>简单来说就是可以判断某个Key是否不存在。</p>
<p>可以为全局或者每个Tablet Server，以及SSTable分别维护一个Bloom Filter，用于加速读查询，减少到SSTable的查询；对于可能存在的Key，利用二分法查询</p>
<h2 id="优化">优化</h2>
<p>除了上文中说的到优化方式，原文还提到了几种优化手段。</p>
<h3 id="局部性">局部性</h3>
<p>通过配置或者自动等方式，把高频使用的列数据组合生成一个SSTable存储，减少分开Fetch的时间。</p>
<blockquote>
<p>空间换时间，充分利用局部性原理</p>
</blockquote>
<h3 id="压缩">压缩</h3>
<p>将SSTable中的分块进行二级压缩处理。本质其实是为了减少网络传输的带宽和时延，但需要额外的压缩和解压计算。</p>
<blockquote>
<p>分块压缩是为了减少编解码的时间以及提高并行效率</p>
</blockquote>
<h3 id="commitlog-设计">CommitLog 设计</h3>
<p>关键其实是Log的粒度问题。Tablet粒度下，会有大量的Log文件。在并行写入GFS中会有大量的磁盘Seek操作，并且不利于Batch化。集群单独一个CommitLog会带来恢复上的高复杂度。</p>
<p>Bigtable中是每个Tablet Server一个Commit Log。但由于Tablet Server维护了多个Tablet，这就使得Bigtable必须维护LogEntry到TabletID的映射以及顺序，以便在恢复时使用。对一个Tablet的数据恢复可能会导致扫描整个CommitLog，</p>
<p>此处Bigtable的优化是将Log按照(Table, row, log seq num)并行分块排序，使得同一个Tablet的LogEntry聚合。</p>
<h2 id="总结">总结</h2>
<p>不要过渡设计，Simple is Better Than Complex。</p>
<p>对于分布式服务，集群监控非常重要。Google三篇论文中对集群状态的监控都是不可缺少的一环。监控的意义也在于支持集群的调度。</p>
<p>设计时不要对其他系统做出任何假设，出现的不仅仅是常见的网络问题，现实中可能会遇到各类问题。</p>
<p>利用后台处理加速前台感知。利用简单的机制处理前台请求，再开启后台进程善后。</p>
<h2 id="参考">参考</h2>
<p><a href="https://zh.wikipedia.org/wiki/Bigtable">wikipedia</a></p>
<p><a href="https://static.googleusercontent.com/media/research.google.com/zh-CN//archive/bigtable-osdi06.pdf">Bigtable</a></p>
<p><a href="https://www.cnblogs.com/xybaby/p/9096748.html">典型分布式系统分析：Bigtable</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/181498475">LSM树详解</a></p>

    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">NoneBack</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
      2021-09-16
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


    
    

    <footer class="post-footer">
      <div class="post-tags">
          <a href="https://noneback.github.io/tags/paper-reading/">Paper Reading</a>
          <a href="https://noneback.github.io/tags/mit6.824/">MIT6.824</a>
          <a href="https://noneback.github.io/tags/dfs/">DFS</a>
          <a href="https://noneback.github.io/tags/distributed-system/">Distributed System</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/dfs-haystack/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">DFS-Haystack</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/post/mit6.824-gfs/">
            <span class="next-text nav-default">MIT6.824-GFS</span>
            <span class="prev-text nav-mobile">Next</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  

  

  
  
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "noneback/noneback.github.io"
            issue-term="title"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
  

  

  

  

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="chenlan2333@gmail.com" rel="me noopener" class="iconfont"
      title="email"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="https://github.com/noneback" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>


<a href="https://noneback.github.io/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2020 -
    2022
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        @noneback
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>



  <script type="text/javascript">
    window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML' async></script>









  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  















</body>
</html>
